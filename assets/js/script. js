document.addEventListener('DOMContentLoaded', () => {

    const body = document.body;
    const isLandingPage = body.classList.contains('landing-page');

    /* =======================================
       1. Spotlight Cursor Effect (Landing Page Only)
       ======================================= */
    const spotlight = document.getElementById('spotlight-cursor');
    // Check for pointer type to disable on touch devices (mobile)
    if (spotlight && (window.matchMedia('(hover: hover)').matches && window.matchMedia('(pointer: fine)').matches)) {
        document.addEventListener('mousemove', (e) => {
            // Position the spotlight at the cursor coordinates
            spotlight.style.left = `${e.clientX}px`;
            spotlight.style.top = `${e.clientY}px`;
        });
    }


    /* =======================================
       2. Curtain Opening and Page Transition
       ======================================= */
    if (isLandingPage) {
        const enterButton = document.getElementById('enter-button');
        
        enterButton.addEventListener('click', (e) => {
            e.preventDefault();
            
            // 1. Disable the button immediately
            enterButton.disabled = true;

            // 2. Add a class to the body to start the CSS curtain transition
            document.body.classList.add('curtains-open');

            // 3. Wait for the transition to complete (2 seconds, matching CSS transition time)
            setTimeout(() => {
                // 4. Navigate to the main stage page
                window.location.href = '/index.html'; 
            }, 2000); 
        });
    }
});
