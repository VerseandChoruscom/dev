<!DOCTYPE html>
<html lang="en">
<head>
    <?php include 'header.php'; // Keep original PHP includes ?>
  
    <title>Kellie Larson Songwriting Catalog | Digital Jukebox, Setlist, and Lyric Pitches</title>
  
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  
    <meta name="description" content="Kellie Larson's full digital songwriting catalog (44 songs). Browse the setlist by Genre and Mood for A&R reviews, sync licensing, and music pitches. All lyrics available for collaboration.">
    <meta name="keywords" content="Kellie Larson lyrics, songwriting catalog, digital jukebox, A&R review, sync licensing, original song setlist, cinematic lyricist">

    <link rel="stylesheet" href="/assets/css/style.css" />
  
    <style>
        /* --- FUN DIGITAL JUKEBOX PALETTE --- */
        :root {
            --primary-accent: #FF4081; /* Hot Pink */
            --secondary-accent: #7C4DFF; /* Electric Purple */
            --background-light: #f5f5f5; /* Light Base */
            --jukebox-body: #4FC3F7; /* Vibrant Light Blue for Jukebox Body */
            --text-color: #111;
            --card-base: #FFFFFF;
        }

        /* 1. JUKEBOX CONTAINER (The Fun Machine Body) */
        .jukebox-container {
            width: 100%;
            max-width: 1200px;
            margin: 30px auto;
            background-color: var(--jukebox-body);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4), 
                        0 0 50px var(--secondary-accent);
            overflow: hidden;
            padding: 20px;
            border: 8px solid var(--primary-accent);
        }

        .jukebox-header {
            text-align: center;
            margin-bottom: 25px;
            padding: 15px;
            background: linear-gradient(to right, #fff, #eee);
            border-radius: 10px;
            border-bottom: 3px solid var(--secondary-accent);
        }

        .jukebox-header h2 {
            font-size: 2em;
            color: var(--primary-accent); 
            margin-bottom: 5px;
        }

        .jukebox-header p {
            color: var(--text-color);
            font-style: normal;
            font-weight: 500;
        }

        /* 2. CATEGORY BUTTONS */
        #category-nav {
            background-color: var(--secondary-accent);
            padding: 15px 10px;
            text-align: center;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            border-radius: 30px;
            margin-bottom: 20px;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.5);
        }

        .category-button {
            background-color: #6136d9;
            color: #fff;
            border: none;
            padding: 10px 18px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 700;
            transition: background-color 0.3s, transform 0.2s, box-shadow 0.3s;
            font-size: 1em;
            letter-spacing: 0.5px;
        }

        .category-button:hover {
            background-color: var(--primary-accent);
            transform: translateY(-2px);
        }

        .category-button.active {
            background-color: var(--primary-accent); 
            color: #fff;
            box-shadow: 0 0 15px var(--primary-accent), 0 0 5px #fff;
            transform: scale(1.05);
        }

        /* 3. SONG LIST GRID */
        .song-list {
            background-color: var(--card-base);
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }

        /* 4. SONG CARDS */
        .song-card {
            background-color: var(--background-light); 
            border: 2px solid var(--secondary-accent);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 4px 4px 0 var(--secondary-accent);
            transition: box-shadow 0.3s, transform 0.3s;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .song-card:hover {
            transform: translateY(-5px);
            box-shadow: 8px 8px 0 var(--primary-accent);
        }

        /* Link Wrapper Styling (Ensures the H3 Title is clickable to Songbay page) */
        .song-link {
            text-decoration: none;
        }

        .song-title {
            color: var(--primary-accent); 
            font-size: 1.5em;
            margin-top: 0;
            margin-bottom: 8px;
            font-weight: 900;
            transition: color 0.2s;
        }
        .song-link:hover .song-title {
             color: var(--secondary-accent);
        }

        .song-metadata {
            font-size: 1em;
            color: #555; 
            margin-bottom: 4px;
        }

        .song-metadata span {
            font-weight: 700;
            color: var(--text-color); 
        }

        .song-description {
            color: #333;
            margin-top: 15px;
            padding-top: 10px;
            border-top: 2px dashed #ccc;
            font-style: italic;
            font-size: 0.9em;
            flex-grow: 1; /* Allow description to take up available space */
            margin-bottom: 15px;
        }
        
        /* New Button Style for Modal */
        .lyrics-button {
            background-color: var(--primary-accent);
            color: white;
            padding: 10px 18px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 700;
            transition: background-color 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            width: 100%;
            margin-top: 10px;
        }
        .lyrics-button:hover {
            background-color: #d9004d; /* Darker Pink */
        }
        
        /* --- MODAL STYLES --- */
        .modal {
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 30px;
            border: 1px solid #888;
            width: 90%;
            max-width: 800px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-content h3 {
            color: var(--primary-accent);
            font-size: 2em;
            border-bottom: 2px solid var(--secondary-accent);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .modal-content p strong {
            color: var(--text-color);
        }

        .modal-lyrics {
            white-space: pre-wrap;
            background-color: #eee;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.95em;
            max-height: 40vh;
            overflow-y: scroll;
            border: 1px solid #ccc;
        }

        .close-btn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            transition: color 0.2s;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: var(--primary-accent);
            text-decoration: none;
            cursor: pointer;
        }
        
        .songbay-player-embed {
            width: 100%;
            height: 120px; /* Standard height for Songbay player iframe */
            border: none;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <header id="main-header">
        <?php include 'header.php'; // Keep original PHP includes ?>
    </header>

    <main class="page-content">
        <h1 class="page-header gold-script">Kellie Larson Songwriting Setlist: Digital Jukebox</h1>
        
        <div class="jukebox-container">
            <div class="jukebox-header">
                <h2>44 Original Songs Available for A&R & Sync Pitching üé∂</h2>
                <p>Select a Mood or Theme to instantly filter Kellie's complete catalog. Every song title links directly to its licensing page on Songbay. **Click 'View Lyrics' for the Songbay Player and Full Lyrics.**</p>
            </div>

            <div id="category-nav">
                </div>

            <div class="song-list" id="song-list">
                <p style="text-align: center; width: 100%; color: #888;">Loading songs...</p>
            </div>
        </div>

    </main>

    <footer class="site-footer">
        <p>
            Cinematic Songwriter & Lyricist @2025 Kellie Larson üéôÔ∏èVerseandChorus.com ‚òéÔ∏è 760-537-0222 ‚úâÔ∏è info@verseandchorus.com üìù <a href="/legal.html">Legal</a>
        </p>
    </footer>

    <?php include 'footer.php'; // Keep original PHP includes ?>
    
    <div id="song-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3 id="modal-title">Song Title</h3>
            
            <p><strong>Artist/Writer:</strong> <span id="modal-artist">Kellie Larson</span></p>
            <p><strong>Genres:</strong> <span id="modal-genres"></span> | <strong>Category:</strong> <span id="modal-category"></span></p>
            
            <h4>Audio Preview (via Songbay Player)</h4>
            <iframe id="songbay-player" class="songbay-player-embed" src="" allow="autoplay"></iframe>

            <h4>Full Lyrics</h4>
            <pre id="modal-lyrics" class="modal-lyrics"></pre>
        </div>
    </div>


    <script>
        // --- Song Data from JSON (Simulated PHP inclusion) ---
        // The data below is the complete, unaltered content of lyrics.json
        const ALL_SONGS_DATA_RAW = JSON.parse(
            '<?php echo json_encode(json_decode(file_get_contents("lyrics.json"), true)); ?>'
        );
        
        // Custom renaming map based on user instructions
        const TITLE_RENAME_MAP = {
            "Tick Tok": "The Real Dream Team",
            "Hubba Bubba song": "Heartbreak and Trouble",
            "Just": "Just A Little Lonely",
            "Too Much": "Just Too Much",
            "Fury": "Fury (I'm the Monster)",
            "When Misty Cries": "Your Forever Man",
            "Miss Your Stupid Face": "Etched in Every Space",
            "Sick One": "Sick One (s1c)",
            "Not Clever": "I Know Your Damn Pin Code",
            "Boys Boys Boys": "CEO NOT A BABYSITTING TREE"
        };
        
        // Apply renames and filter out Placeholder songs
        const ALL_SONGS_DATA = ALL_SONGS_DATA_RAW
            .map(song => {
                let newTitle = song.title;
                for (const oldTitle in TITLE_RENAME_MAP) {
                    if (newTitle.includes(oldTitle)) {
                        newTitle = TITLE_RENAME_MAP[oldTitle];
                        break;
                    }
                }
                // Also explicitly replace the old titles with the new titles in the new data structure 
                // that was originally hardcoded in lyrics.html, for completeness, if it were still used.
                if (song.title === "Just") song.title = "Just A Little Lonely";
                if (song.title === "Too Much") song.title = "Just Too Much";
                if (song.title === "Fury") song.title = "Fury (I'm the Monster)";
                if (song.title === "Miss Your Stupid Face") song.title = "Etched in Every Space";
                if (song.title === "Sick One") song.title = "Sick One (s1c)";
                if (song.title === "Not Clever") song.title = "I Know Your Damn Pin Code";
                if (song.title === "Boys Boys Boys") song.title = "CEO NOT A BABYSITTING TREE";
                if (song.title === "Tick Tok") song.title = "The Real Dream Team";
                if (song.title === "Hubba Bubba song") song.title = "Heartbreak and Trouble";
                if (song.title === "When Misty Cries") song.title = "Your Forever Man";

                return { ...song, title: newTitle };
            })
            // Filter out songs where the title is Placeholder
            .filter(song => song.title !== "Placeholder" && song.fullLyrics !== "Placeholder");


        // --- GLOBAL ELEMENTS & CONSTANTS ---
        const songListElement = document.getElementById('song-list');
        const categoryNavElement = document.getElementById('category-nav');
        const allCategories = ['All Songs', ...new Set(ALL_SONGS_DATA
            .map(song => song.category)
            .filter(cat => cat && cat !== 'Placeholder' && cat !== 'General / Placeholder')
        )].sort();

        const modal = document.getElementById('song-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalArtist = document.getElementById('modal-artist');
        const modalGenres = document.getElementById('modal-genres');
        const modalCategory = document.getElementById('modal-category');
        const modalLyrics = document.getElementById('modal-lyrics');
        const songbayPlayer = document.getElementById('songbay-player');
        const closeBtn = document.querySelector('.close-btn');


        // --- CORE FUNCTIONS ---

        // Renders the individual song cards
        function renderSongs(songs) {
            songListElement.innerHTML = ''; 
            if (songs.length === 0) {
                songListElement.innerHTML = '<p style="text-align: center; width: 100%; color: #888;">No songs found in this category.</p>';
                return;
            }

            songs.forEach(song => {
                // Determine Genres
                const genres = [song.genre1, song.genre2].filter(g => g && g !== 'Placeholder' && g !== 'N/A').join(' / ');
                // Determine Description
                const description = song.shortDescription && song.shortDescription !== 'Placeholder' ? song.shortDescription : 'Description unavailable.';
                
                const card = document.createElement('div');
                card.className = 'song-card';

                const cardHtml = `
                    <div>
                        <a href="${song.songbayWebpageUrl || '#'}" target="_blank" class="song-link" title="View on Songbay">
                            <h3 class="song-title">${song.title}</h3>
                        </a>
                        <p class="song-metadata">Genre: <span>${genres}</span></p>
                        <p class="song-metadata" style="margin-bottom:0;">Category: <span>${song.category || 'N/A'}</span></p>
                        <div class="song-description">${description}</div>
                    </div>
                    
                    <button class="lyrics-button" onclick="openSongModal(${song.id})">
                        View Lyrics & Player
                    </button>
                `;

                card.innerHTML = cardHtml;
                songListElement.appendChild(card);
            });
        }

        // Handles button clicks and filtering
        function filterSongs(category) {
            document.querySelectorAll('.category-button').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent === category) {
                    btn.classList.add('active');
                }
            });

            if (category === 'All Songs') {
                renderSongs(ALL_SONGS_DATA);
            } else {
                const filtered = ALL_SONGS_DATA.filter(song => song.category === category);
                renderSongs(filtered);
            }
        }
        
        // Function to open the modal with song-specific content
        window.openSongModal = function(songId) {
            const song = ALL_SONGS_DATA.find(s => s.id === songId);
            if (!song) return;
            
            const genres = [song.genre1, song.genre2].filter(g => g && g !== 'Placeholder' && g !== 'N/A').join(' / ');
            const fullLyrics = song.fullLyrics && song.fullLyrics.trim() !== '' ? song.fullLyrics : "Placeholder: Full lyrics are not available.";

            modalTitle.textContent = song.title;
            modalArtist.textContent = song.artistWriter;
            modalGenres.textContent = genres;
            modalCategory.textContent = song.category || 'N/A';
            modalLyrics.textContent = fullLyrics;
            
            // Set the Songbay player iframe source, fulfilling the requirement
            // Use songbayPlayerUrl (or a placeholder if missing)
            songbayPlayer.src = song.songbayPlayerUrl && song.songbayPlayerUrl !== 'Placeholder' ? song.songbayPlayerUrl : 'about:blank';

            modal.style.display = 'flex';
        }
        
        // Function to close the modal
        function closeSongModal() {
            modal.style.display = 'none';
            // Stop the iframe audio when closing the modal
            songbayPlayer.src = '';
        }

        // Initialization function to build buttons and load default view
        function initJukebox() {
            // Build the Category buttons
            allCategories.forEach(category => {
                const button = document.createElement('button');
                button.className = 'category-button';
                button.textContent = category;
                button.addEventListener('click', () => filterSongs(category));
                categoryNavElement.appendChild(button);
            });
            
            // Set initial filter to 'All Songs'
            filterSongs('All Songs');
            
            // Add event listeners for modal
            closeBtn.addEventListener('click', closeSongModal);
            window.addEventListener('click', (event) => {
                if (event.target === modal) {
                    closeSongModal();
                }
            });
            window.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && modal.style.display === 'flex') {
                    closeSongModal();
                }
            });
        }

        document.addEventListener('DOMContentLoaded', initJukebox);
    </script>
</body>
</html>
